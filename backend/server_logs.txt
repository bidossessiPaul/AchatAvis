
> dev:backend
> cd backend && npm run dev


> achatavis-backend@1.0.0 dev
> tsx watch src/app.ts

ðŸš€ Server running on port 5001
Login error: Error: Unknown column 'ap.subscription_start_date' in 'SELECT'
    at PromisePool.execute (/Users/fvfl73g71wfv/Documents/dashbaord achatAvis/backend/node_modules/mysql2/lib/promise/pool.js:54:22)
    at query (/Users/fvfl73g71wfv/Documents/dashbaord achatAvis/backend/src/config/database.ts:30:34)
    at Object.login (/Users/fvfl73g71wfv/Documents/dashbaord achatAvis/backend/src/services/authService.ts:155:29)
    at login (/Users/fvfl73g71wfv/Documents/dashbaord achatAvis/backend/src/controllers/authController.ts:86:47)
    at Layer.handle [as handle_request] (/Users/fvfl73g71wfv/Documents/dashbaord achatAvis/backend/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/fvfl73g71wfv/Documents/dashbaord achatAvis/backend/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/Users/fvfl73g71wfv/Documents/dashbaord achatAvis/backend/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/Users/fvfl73g71wfv/Documents/dashbaord achatAvis/backend/node_modules/express/lib/router/layer.js:95:5)
    at /Users/fvfl73g71wfv/Documents/dashbaord achatAvis/backend/node_modules/express/lib/router/index.js:284:15
    at router.process_params (/Users/fvfl73g71wfv/Documents/dashbaord achatAvis/backend/node_modules/express/lib/router/index.js:346:12) {
  code: 'ER_BAD_FIELD_ERROR',
  errno: 1054,
  sql: 'SELECT u.id, u.email, u.full_name, u.avatar_url, u.password_hash, u.role, u.status, u.email_verified, \n' +
    '                u.two_factor_enabled, u.two_factor_secret,\n' +
    '                ap.subscription_status, ap.subscription_end_date, ap.subscription_tier, ap.monthly_reviews_quota, ap.current_month_reviews, ap.subscription_start_date, ap.fiches_allowed,\n' +
    "                (SELECT COUNT(*) FROM reviews_orders WHERE artisan_id = u.id AND status != 'cancelled') as fiches_used\n" +
    '         FROM users u\n' +
    "         LEFT JOIN artisans_profiles ap ON u.id = ap.user_id AND u.role = 'artisan'\n" +
    '         WHERE u.email = ?',
  sqlState: '42S22',
  sqlMessage: "Unknown column 'ap.subscription_start_date' in 'SELECT'"
}
